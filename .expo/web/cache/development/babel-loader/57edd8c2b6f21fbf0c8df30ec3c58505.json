{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/verycool/Desktop/reactNative/geohut_sport/components/Profile.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Button, Content, Card, CardItem, Body } from \"native-base\";\nimport * as firebase from 'firebase';\nimport PageTemplate from \"./subComponents/Header\";\nimport ChangeInfo from \"./subComponents/changeInformationModal\";\nimport { connect } from 'react-redux';\n\nvar Profile = function (_Component) {\n  _inherits(Profile, _Component);\n\n  var _super = _createSuper(Profile);\n\n  function Profile() {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.logout = function () {\n      firebase.auth().signOut().catch(function (error) {\n        return console.log(error);\n      });\n\n      _this.props.navigation.navigate('StartScreen');\n    };\n\n    _this.uid = firebase.auth().currentUser.uid;\n    _this.state = {\n      firstName: '',\n      lastName: '',\n      modalVisible: false,\n      total: null,\n      totalWeek: null,\n      showHistory: false,\n      data: null\n    };\n\n    _this.showModal = function () {\n      _this.setState({\n        modalVisible: !_this.state.modalVisible\n      });\n    };\n\n    _this.getCheckinData = function () {\n      fetch(\"https://geohut.metis-data.site/historycheckins/\" + _this.props.reducer.userInfo.workId).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        console.log(res[\"data\"]);\n\n        _this.setState({\n          data: res[\"data\"],\n          showHistory: true\n        });\n      });\n    };\n\n    _this.showHistory = function () {\n      _this.setState({\n        showHistory: !_this.state.showHistory\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.readUserData();\n    }\n  }, {\n    key: \"readUserData\",\n    value: function readUserData() {\n      var _this2 = this;\n\n      firebase.database().ref('UsersList/' + this.uid + '/info').once('value', function (snapshot) {\n        var data = snapshot.val();\n\n        _this2.setState({\n          firstName: data.firstName,\n          lastName: data.lastName,\n          workId: data.workId\n        });\n\n        fetch(\"https://geohut.metis-data.site/checkins/\" + _this2.props.reducer.userInfo.workId).then(function (res) {\n          return res.json();\n        }).then(function (res) {\n          console.log(res.data);\n\n          _this2.setState({\n            total: res.data[0]['total']\n          });\n        }).catch(function (error) {\n          return _this2.setState({\n            totalWeek: 0\n          });\n        });\n        fetch(\"https://geohut.metis-data.site/checkinsWeek/\" + _this2.props.reducer.userInfo.workId).then(function (res) {\n          return res.json();\n        }).then(function (res) {\n          console.log(res.data);\n\n          _this2.setState({\n            totalWeek: res.data[0]['count_ins']\n          });\n        }).catch(function (error) {\n          _this2.setState({\n            totalWeek: 0\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      }, React.createElement(PageTemplate, {\n        title: 'Profile',\n        logout: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }\n      }), React.createElement(Content, {\n        padder: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }, React.createElement(CardItem, {\n        header: true,\n        bordered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }\n      }, React.createElement(View, {\n        style: styles.cardContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.cartTitles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 19\n        }\n      }, \"User Id: \"), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 19\n        }\n      }, this.state.workId))), React.createElement(CardItem, {\n        bordered: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }\n      }, React.createElement(Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: styles.cardContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.cartTitles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }\n      }, \"First Name: \"), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }\n      }, this.state.firstName)), React.createElement(View, {\n        style: styles.cardContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.cartTitles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }\n      }, \"Last Name: \"), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }\n      }, this.state.lastName)), React.createElement(View, {\n        style: styles.cardContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.cartTitles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      }, \"Check-Ins This Week: \"), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }\n      }, this.state.totalWeek)), React.createElement(View, {\n        style: styles.cardContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: styles.cartTitles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }\n      }, \"Total Check-Ins: \"), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }\n      }, this.state.total))))), React.createElement(Button, {\n        style: {\n          margin: 10,\n          marginTop: 40\n        },\n        full: true,\n        rounded: true,\n        primary: true,\n        onPress: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 16\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 20\n        }\n      }, \"Change Info\")), React.createElement(Button, {\n        style: {\n          margin: 10\n        },\n        full: true,\n        rounded: true,\n        primary: true,\n        onPress: this.getCheckinData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 23\n        }\n      }, this.state.showHistory ? 'Refresh Checkin History' : 'Show Checkin History')), this.state.showHistory ? React.createElement(Button, {\n        style: {\n          margin: 10,\n          marginTop: 5\n        },\n        full: true,\n        rounded: true,\n        primary: true,\n        onPress: function onPress() {\n          return Alert.alert('Data sharing is coming soon! Thank you for your patience.');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 23\n        }\n      }, \"Share my Data\")) : React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 33\n        }\n      }), this.state.showHistory ? this.state.data.map(function (item, index) {\n        return React.createElement(View, {\n          key: index,\n          style: styles.item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }\n        }, React.createElement(View, {\n          style: styles.cardContainer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 33\n          }\n        }, React.createElement(Text, {\n          style: styles.cartTitles,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 35\n          }\n        }, \"Name: \"), React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 35\n          }\n        }, _this3.state.firstName + \" \" + _this3.state.lastName)), React.createElement(View, {\n          style: styles.cardContainer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 33\n          }\n        }, React.createElement(Text, {\n          style: styles.cartTitles,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 35\n          }\n        }, \"Checkin Site: \"), React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 35\n          }\n        }, \"\" + item.site_id)), React.createElement(View, {\n          style: styles.cardContainer,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 33\n          }\n        }, React.createElement(Text, {\n          style: styles.cartTitles,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 35\n          }\n        }, \"Checkin Time Stamp: \"), React.createElement(Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 35\n          }\n        }, item.checkin_date_time.substring(0, 10) + \" \" + item.checkin_date_time.substring(11, 16))));\n      }) : React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 29\n        }\n      })), React.createElement(ChangeInfo, {\n        modalVisible: this.state.modalVisible,\n        showModal: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 8\n        }\n      }));\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var reducer = state.reducer;\n  return {\n    reducer: reducer\n  };\n};\n\nexport default connect(mapStateToProps)(Profile);\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 40\n  },\n  item: {\n    padding: 20,\n    margin: 2,\n    borderRadius: 10,\n    alignSelf: 'stretch',\n    borderWidth: 1,\n    backgroundColor: '#a7a6ba'\n  },\n  cardContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  cartTitles: {\n    fontWeight: \"bold\"\n  }\n});","map":{"version":3,"sources":["/Users/verycool/Desktop/reactNative/geohut_sport/components/Profile.js"],"names":["React","Component","Button","Content","Card","CardItem","Body","firebase","PageTemplate","ChangeInfo","connect","Profile","logout","auth","signOut","catch","error","console","log","props","navigation","navigate","uid","currentUser","state","firstName","lastName","modalVisible","total","totalWeek","showHistory","data","showModal","setState","getCheckinData","fetch","reducer","userInfo","workId","then","res","json","readUserData","database","ref","once","snapshot","val","styles","cardContainer","cartTitles","margin","marginTop","color","Alert","alert","map","item","index","site_id","checkin_date_time","substring","mapStateToProps","StyleSheet","create","container","flex","backgroundColor","alignItems","justifyContent","padding","borderRadius","alignSelf","borderWidth","flexDirection","fontWeight"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { StyleSheet, Text, View, Alert } from 'react-native';\nimport { Button, Content, Card, CardItem, Body } from \"native-base\";\nimport * as firebase from 'firebase';\nimport PageTemplate from './subComponents/Header'\nimport ChangeInfo from './subComponents/changeInformationModal'\n//import Layout from '../constants/Layout';\n \n\nimport { connect } from 'react-redux';\n\nclass Profile extends Component {\n\n\n  logout = () =>{\n    firebase.auth().signOut()\n        .catch(error => console.log(error))\n\n    this.props.navigation.navigate('StartScreen')\n  }\n\n\n  uid = firebase.auth().currentUser.uid;\n\n  state = {\n    firstName:'',\n    lastName:'',\n    modalVisible: false,\n    total: null,\n    totalWeek: null,\n    showHistory: false,\n    data:null\n  }\n\n\n\n//CHANGE INFO MODAL TOGGLE\n  showModal =() => {\n    this.setState({ modalVisible : !this.state.modalVisible })\n  }\n\n\n  componentDidMount() {\n    this.readUserData()\n    \n  }\n\n  getCheckinData =() => {\n  \n    fetch(`https://geohut.metis-data.site/historycheckins/${this.props.reducer.userInfo.workId}`)\n      .then(res => res.json())\n      .then(res => {\n       console.log(res[\"data\"])\n        this.setState({ data: res[\"data\"], showHistory: true })\n      })\n  }\n\n\n  readUserData() {\n\n  \n    firebase.database().ref('UsersList/'+ this.uid + '/info').once('value', snapshot => {\n     \n    let data = snapshot.val()\n\n       \n        this.setState({ firstName: data.firstName,\n                        lastName: data.lastName,\n                        workId: data.workId});\n\n                        fetch(`https://geohut.metis-data.site/checkins/${this.props.reducer.userInfo.workId}`)\n                        .then(res => res.json())\n                        .then(res => {\n                          console.log(res.data)\n                \n                    this.setState({total:res.data[0]['total']})\n                    \n                        }).catch(error => this.setState({totalWeek: 0}))\n                      \n                        \n\n\n                        fetch(`https://geohut.metis-data.site/checkinsWeek/${this.props.reducer.userInfo.workId}`)\n                        .then(res => res.json())\n                        .then(res => {\n                          console.log(res.data)\n                    this.setState({totalWeek:res.data[0]['count_ins']})\n                    \n                        }).catch(error => {\n                         \n                          \n                          this.setState({totalWeek: 0})})\n    })\n    \n  }\n\n  showHistory = () => {\n    this.setState({ showHistory : !this.state.showHistory })\n  }\n\n\n    render(){\n\n        return (\n          <React.Fragment>\n          <PageTemplate title={'Profile'} logout = {this.logout}/>\n          <Content padder>\n            <Card>\n              <CardItem header bordered>\n                <View style={styles.cardContainer}>\n                  <Text style={styles.cartTitles}>User Id: </Text>\n                  <Text>{this.state.workId}</Text>\n                </View>\n              </CardItem>\n              <CardItem bordered>\n                <Body>\n                  <View style={styles.cardContainer}>\n                    <Text style={styles.cartTitles}>First Name: </Text>\n                    <Text>{this.state.firstName}</Text>\n                  </View>\n                  <View style={styles.cardContainer}>\n                    <Text style={styles.cartTitles}>Last Name: </Text>\n                    <Text>{this.state.lastName}</Text>\n                  </View>\n                  <View style={styles.cardContainer}>\n                    <Text style={styles.cartTitles}>Check-Ins This Week: </Text>\n                    <Text>{this.state.totalWeek}</Text>\n                  </View>\n                  <View style={styles.cardContainer}>\n                    <Text style={styles.cartTitles}>Total Check-Ins: </Text>\n                    <Text>{this.state.total}</Text>\n                  </View>\n                \n                </Body>\n              </CardItem>\n              \n            </Card>\n              \n               <Button style ={{margin:10, marginTop: 40}}\n               full\n               rounded\n               primary\n               onPress={this.showModal}>\n                   <Text style = {{color:'white'}}>Change Info</Text>\n               </Button>\n              \n           \n                    \n                    <Button style ={{margin:10}}\n                      full\n                      rounded\n                      primary\n                      onPress={this.getCheckinData}>\n                      <Text style = {{color:'white'}}>{this.state.showHistory ? 'Refresh Checkin History' : 'Show Checkin History'}</Text>\n                    </Button>\n                    { this.state.showHistory ?\n                    <Button style ={{margin:10, marginTop: 5}}\n                      full\n                      rounded\n                      primary\n                      onPress={()=>Alert.alert('Data sharing is coming soon! Thank you for your patience.')}>\n                      <Text style = {{color:'white'}}>Share my Data</Text>\n                    </Button> : <View></View>\n                    }\n\n                    { this.state.showHistory ?\n                     \n                      this.state.data.map((item, index) => (\n                        <View key = {index} style = {styles.item}>\n                                <View style={styles.cardContainer}>\n                                  <Text style={styles.cartTitles}>Name: </Text>\n                                  <Text>{`${this.state.firstName} ${this.state.lastName}`}</Text>\n                                </View>\n                                <View style={styles.cardContainer}>\n                                  <Text style={styles.cartTitles}>Checkin Site: </Text>\n                                  <Text>{`${item.site_id}`}</Text>\n                                </View>\n                                <View style={styles.cardContainer}>\n                                  <Text style={styles.cartTitles}>Checkin Time Stamp: </Text>\n                                  <Text>{`${item.checkin_date_time.substring(0,10)} ${item.checkin_date_time.substring(11,16)}`}</Text>\n                                </View>\n                        </View>\n                      ))  : <View></View>\n                    }\n\n                   \n          </Content>\n       <ChangeInfo \n       modalVisible = {this.state.modalVisible}\n       showModal = {this.showModal}\n       \n       />\n        </React.Fragment>\n          );\n\n    }\n\n\n\n}\n\n\nconst mapStateToProps = (state) => {\n    \n  const { reducer } = state\n  return { reducer }\n};\n\n\n\nexport default connect(mapStateToProps\n  )(Profile);\n\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding:40\n  },\n  item: {\n    //flex: 1,\n    //flexDirection: 'row',\n    //justifyContent: 'space-between',\n    //alignItems: 'center',\n    padding: 20,\n    margin: 2,\n    //borderColor: '#2a4944',\n    borderRadius: 10,\n    //idth: Layout.window.width - 20,\n    //width:'100%',\n    alignSelf: 'stretch',\n    borderWidth: 1,\n    backgroundColor: '#a7a6ba'\n },\n  cardContainer: {\n    //marginTop: 8,\n    //paddingVertical: 15,\n    //paddingHorizontal: 5,\n    flexDirection: \"row\",\n    //justifyContent: \"space-between\",\n    alignItems: \"center\",\n},\n  cartTitles: {\n    fontWeight: \"bold\"\n}\n});"]},"metadata":{},"sourceType":"module"}